---------------------------------------------------
Thread Definition
---------------------------------------------------

**LAMP CONTROL
	mutex 			mutChangePWM
	condVariable 	condNewPWM


	- PIR
	    mutex_lock(mutChangePWM)
	    pwm_val = 100%;
	    pthread_cond_signal(condNewPWM);
	    mutex_unlock(mutChangePWM);

	- LDR
		timer

	 ------
	 - tLampControl
	    mutex_lock(mutChangePWM)
	    cond_wait(mutChangePWM, condNewPWM)
	    
	    setPWM(pwm_val)

	    mutex_unlock(mutChangePWM);    

	    if(pwm == MAX)
	    	activateTimer()

	------
	signHandl
		mutex_lock(mutChangePWM)
	    pwm_val = MIN%;
	    pthread_cond_signal(condNewPWM);
	    mutex_unlock(mutChangePWM);


**CAMERA
	mutCamera
	condCameraAcquire


tCamera
	CameraInit();

	ativaCamTimer
	
	while(1)
		mutex_lock(mutCamera);
		pthread_cond_wait(condCameraAcquire)
		Activate timerMaxTime
		Acquire frame
		Process
		[Notification]
		Disable Timer
		mutex_unlock(mutCamera)

	

	SignHandle
		pthread_cond_signal(condCameraAcquire)
		restart(timer)


	TIMEOUT timerMaxTime
		SignHandle
			send error to syslog

????? SignHandle or timer_ISR?



**COMUNICAÇÃO LORA (LOCALSYS - GATEWAY)

Comunicação(LoRa):
	- receber
		ligar lampada

	- enviar (messages)
		- turn on/off light notification
		- light failure notification
		- park found notification
		- error messages 
			.camera time error

	- tLoRaReceive
		while(1)
			pthread_lock(mutComms);

			message = Receive()
			pthread_unlock(mutComms);
			if(message not empty)
				Parse_command(message)

	- tLoRaSend
		while(1)
			pthread_lock(mutSend);
			pthread_cond_wait(condSend, mutSend);
			
			pthread_lock(mutComms);
			send(message)
			pthread_unlock(mutComms);

			pthread_unlock(mutSend);
